<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="cheep.css"/>
    </head>

    <body>
        <div id="screen">
            <div id="logo">
                <img id="login_bird" src="images/chick_3.png" style="margin-left: 10px">
                <!--<input type="text" id="search_bar">-->

                Cheep
            </div>

            <div id="login">
                <div class="piece" style="padding-top: 50px">Log In</div>
                <div class="piece"><input type="text" placeholder="username" class="user_info" id="login_username"></div>
                <div class="piece"><input type="text" placeholder="password" class="user_info" id="login_password"></div>
                <button style="font-size: 16px; width: 180px;" onclick="login()"><a href="enter.html" style="text-decoration: none; color: black;">LOG IN</a></button>
            </div>
            

            <div style="font-size: 15px; margin-top: 125px;">New to Cheep?</div>
            <button style="font-size: 16px; margin-top: 10px; width: 180px;"><a href="create_account.html" style="text-decoration: none; color: black;">CREATE AN ACCOUNT</a></button>

        </div>

        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
             https://firebase.google.com/docs/web/setup#config-web-app -->

        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyDnOwuo2b9OnJsVH0ErxUgarks1iKFDRM8",
                authDomain: "cheep-app.firebaseapp.com",
                databaseURL: "https://cheep-app.firebaseio.com",
                projectId: "cheep-app",
                storageBucket: "cheep-app.appspot.com",
                messagingSenderId: "17385407188",
                appId: "1:17385407188:web:b41fa17aaeda8b52"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
        </script>

        <script>
            function login(){
                console.log('Login Function Called');

                firebase.database().ref('/users/' + document.getElementById('login_username').value).once("value").then(function(snapshot) {
                    if (!snapshot.exists()){
                        alert('That username does not exist');
                    }
                }).then(
                    firebase.database().ref('/users/' + document.getElementById('login_username').value).once('value').then(function(snapshot) {

                        if(document.getElementById('login_password').value !== snapshot.child('password').val()){
                            alert('Incorrect password');
                        }
                        else{
                            sessionStorage.setItem('username',snapshot.child('username').val())
                            window.location.href = 'search.html';
                        }
                }));

            }
        </script>

    </body>

</html>